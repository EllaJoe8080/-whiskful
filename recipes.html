<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Whiskful Recipes</title>
    <style>
      :root { --brand:#ff7a59; --bg:#fff8f3; --pin:#e60023; }
      * { box-sizing: border-box; margin: 0; padding: 0; }

      body {
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
        color:#222;
        background: var(--bg);
      }

      /* keep content above the background leaves */
      nav, .search-wrap, .grid { position: relative; z-index: 1; }

      /* Navbar */
      nav {
        position:sticky; top:0; z-index:10;
        height:72px; padding:0 24px; background:#fff;
        box-shadow:0 2px 8px rgba(0,0,0,.06);
        display:flex; align-items:center; justify-content:space-between;
      }
      nav img.logo { max-height:140px; width:auto; display:block; }
      nav ul { list-style:none; display:flex; gap:24px; }
      nav a { text-decoration:none; font-weight:600; color:#333; }
      nav a:hover { color:var(--brand); }

      /* Search */
      .search-wrap { display:flex; justify-content:center; margin:28px 0 8px; }
      .search-box { position:relative; width:min(640px,92%); }
      .search-box input {
        width:100%; padding:12px 16px;
        border:2px solid var(--brand); border-radius:999px;
        font-size:16px; background:#fff;
      }
      .search-box input:focus {
        border-color:#ff5a36; box-shadow:0 0 8px rgba(255,122,89,.3);
        outline: none;
      }
      .dangling-gif {
        position:absolute; top:-22px; right:-20px; width:100px;
        pointer-events:none; transform-origin:top center;
        animation:sway 2.5s ease-in-out infinite;
      }
      @keyframes sway { 0%{transform:rotate(6deg)} 50%{transform:rotate(-6deg)} 100%{transform:rotate(6deg)} }

      /* Grid */
      .grid {
        width:min(1100px,94%);
        margin:12px auto 64px;
        display:grid;
        grid-template-columns:repeat(auto-fill, minmax(260px, 1fr));
        gap:12px;
      }
      .tile {
        background:#fff; border-radius:8px; overflow:hidden;
        box-shadow:0 1px 6px rgba(0,0,0,.05);
        transition:transform .15s ease, box-shadow .15s ease;
        position:relative;
      }
      .tile:hover { transform:translateY(-2px); box-shadow:0 10px 24px rgba(0,0,0,.12); }
      .thumb {
        aspect-ratio:2/3;
        background:#fafafa;
        display:flex; align-items:center; justify-content:center;
        padding:4px;
      }
      .thumb img { width:100%; height:100%; object-fit:cover; display:block; }

      /* ===== Floating leaves (working version) ===== */
      #leaf-layer{
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 0;               /* behind UI */
        overflow: hidden;
      }

      .leaf{
        position: absolute;
        top: -12vh;               /* start above view */
        left: var(--start, 50vw); /* set in JS */
        width: var(--size, 44px);
        height: var(--size, 44px);
        opacity: .9;
        filter: drop-shadow(0 3px 6px rgba(0,0,0,.15));
        /* ONLY the vertical fall here */
        animation: fall var(--dur, 10s) linear forwards;
        will-change: transform, opacity;
      }

      /* sway/rotation on the INNER img */
      .leaf img{
        width: 100%;
        height: 100%;
        display: block;
        transform-origin: 50% 20%;
        animation: sway 2.8s ease-in-out infinite alternate;
      }

      @keyframes fall{
        from { transform: translate(0, -12vh); opacity: .9; }
        to   { transform: translate(var(--dx, 80px), 110vh); opacity: .6; }
      }

      @keyframes sway{
        from { transform: rotate(-10deg); }
        to   { transform: rotate(12deg); }
      }

      @media (prefers-reduced-motion: reduce){
        #leaf-layer{ display:none; }
      }
    </style>
  </head>
  <body>
    <!-- Falling leaves background layer -->
    <div id="leaf-layer" aria-hidden="true"></div>

    <!-- Navbar -->
    <nav>
      <a href="index.html"><img src="/logo.png" alt="Whiskful logo" class="logo" /></a>
      <ul>
        <li><a href="recipes.html">Recipes</a></li>
        <li><a href="#">Community</a></li>
        <li><a href="#">About</a></li>
      </ul>
    </nav>

    <!-- Search -->
    <div class="search-wrap">
      <div class="search-box">
        <input type="text" placeholder="Search recipes..." />
        <img src="/images/cherries.gif" alt="" class="dangling-gif" />
      </div>
    </div>

    <!-- Grid -->
    <main class="grid">
      <figure class="tile">
        <div class="thumb">
          <img src="/images/pistachio-chocolate-roll.png" alt="Pistachio Chocolate Swiss Roll" />
        </div>
        <a href="#"></a>
      </figure>

      <figure class="tile">
        <div class="thumb">
          <img src="/images/pumpkin cheesecake truffles.jpeg" alt="Pumpkin Cheesecake Truffles" />
        </div>
        <a href="#"></a>
      </figure>
    </main>

    <!-- Subtle falling leaves script -->
    <script>
      (() => {
        const CONFIG = {
          minInterval: 2200,
          maxInterval: 3800,
          minDur: 9000,
          maxDur: 14000,
          minSize: 18,
          maxSize: 42,
          maxConcurrent: 2
        };

        if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

        const layer = document.getElementById('leaf-layer');
        if (!layer) return;

        let live = 0;

        // tiny inline SVG leaves (transparent)
        const LEAVES = [
          `data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><path fill='%23F39C12' d='M8 38c2-15 19-30 33-28 10 1 15 9 13 18-3 12-18 20-30 20-8 0-14-4-16-10z'/><path fill='none' stroke='%238A4B08' stroke-width='3' d='M9 38c9 3 21 1 31-6'/><path fill='none' stroke='%238A4B08' stroke-width='3' d='M25 26c4 7 9 13 13 20'/></svg>`,
          `data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><path fill='%23E74C3C' d='M12 34c4-12 18-22 30-22 9 0 14 6 12 14-2 10-15 18-26 18-7 0-13-3-16-10z'/><path fill='none' stroke='%238B1E14' stroke-width='3' d='M14 34c8 2 18 0 26-5'/><path fill='none' stroke='%238B1E14' stroke-width='3' d='M24 24c3 6 8 11 12 16'/></svg>`,
          `data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><path fill='%23F1C40F' d='M10 36c3-13 17-25 29-24 9 1 14 8 12 16-3 11-16 19-27 19-7 0-12-4-14-11z'/><path fill='none' stroke='%238A6C00' stroke-width='3' d='M12 36c8 3 19 1 27-6'/><path fill='none' stroke='%238A6C00' stroke-width='3' d='M23 27c3 6 7 12 11 18'/></svg>`
        ];

        const rand = (a,b) => Math.random()*(b-a)+a;

        function spawnLeaf(){
          if (live >= CONFIG.maxConcurrent) return;

          // wrapper
          const leaf = document.createElement('div');
          leaf.className = 'leaf';

          // inner image (handles the sway/rotation)
          const img = document.createElement('img');
          img.src = LEAVES[Math.floor(Math.random()*LEAVES.length)];
          img.alt = '';
          leaf.appendChild(img);

          const size  = rand(CONFIG.minSize, CONFIG.maxSize);
          const dur   = rand(CONFIG.minDur, CONFIG.maxDur);
          const dx    = (Math.random()*160 - 80) + 'px';  // -80..+80
          const start = Math.random() * 100;               // vw

          leaf.style.setProperty('--size', size + 'px');
          leaf.style.setProperty('--dur',  dur + 'ms');
          leaf.style.setProperty('--dx',   dx);
          leaf.style.setProperty('--start', start + 'vw');
          leaf.style.left = start + 'vw';

          live++;
          leaf.addEventListener('animationend', () => { leaf.remove(); live--; }, { once:true });

          layer.appendChild(leaf);
        }

        function loop(){
          spawnLeaf();
          setTimeout(loop, rand(CONFIG.minInterval, CONFIG.maxInterval));
        }

        requestAnimationFrame(loop);
      })();
    </script>
  </body>
</html>
